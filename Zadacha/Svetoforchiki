"Поставить по светофору в каждом тоннеле перед каждым перекрёстком" - не совсем ясно, что имеется в виду под "перед каждым перекрёстком", что за точка.
Можно уточнить, что это точка "вхождения" тоннеля в перекрёсток, светофор устанавливается в месте соединения тоннеля и перекрёстка.
Можно прописать, что в каждом тоннеле по два светофора - по одному на каждом из двух перекрёстков, которые он соединяет.

K_n=M_n: количество светофоров на конкретном перекрёстке равно кол-ву тоннелей, которые к нему примыкают


if M=0 then k=0 - нет тоннелей, перекрёстки обособлены, на каждом из них 0 тоннелей
if M=1 then k=2 - два перекрёстка, один тоннель; у двух соединённых перекрёстков по одному светофору, на остальных - ноль
if M=N*(N-1)/2 then k=N-1 - столько светофоров будет на каждом перекрёстке

Тест-кейсы:
Ввод: 4 6
      1 2
      2 4
      5 6
      1 3
      3 5
Ожидаемый выход: 
